
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Publish Service Â· Fabric8 Documentation</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.0.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="apimanConsumeService.html" />
    
    
    <link rel="prev" href="apimanDataModel.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="overview.html">
            
                <a href="overview.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="getStarted/">
            
                <a href="getStarted/">
            
                    
                    Getting Started
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="getStarted/vagrant.html">
            
                <a href="getStarted/vagrant.html">
            
                    
                    Use Vagrant
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="getStarted/kubernetes.html">
            
                <a href="getStarted/kubernetes.html">
            
                    
                    Use Kubernetes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="getStarted/gke.html">
            
                <a href="getStarted/gke.html">
            
                    
                    Use Kubernetes on GKE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="getStarted/openshift.html">
            
                <a href="getStarted/openshift.html">
            
                    
                    Use OpenShift
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="getStarted/installOpenShift.html">
            
                <a href="getStarted/installOpenShift.html">
            
                    
                    Install OpenShift
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="getStarted/cdk.html">
            
                <a href="getStarted/cdk.html">
            
                    
                    Use CDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="getStarted/apps.html">
            
                <a href="getStarted/apps.html">
            
                    
                    Installing apps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="getStarted/local.html">
            
                <a href="getStarted/local.html">
            
                    
                    Setup Local OpenShift Client
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="getStarted/develop.html">
            
                <a href="getStarted/develop.html">
            
                    
                    Develop locally
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="getStarted/browserCertificates.html">
            
                <a href="getStarted/browserCertificates.html">
            
                    
                    Accept self-signed certs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="getStarted/troubleshooting.html">
            
                <a href="getStarted/troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="develop/">
            
                <a href="develop/">
            
                    
                    Developing Microservices
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="develop/elasticity.html">
            
                <a href="develop/elasticity.html">
            
                    
                    Elasticity and Resilience
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="develop/designForFailure.html">
            
                <a href="develop/designForFailure.html">
            
                    
                    Design for Failure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="develop/serviceDiscovery.html">
            
                <a href="develop/serviceDiscovery.html">
            
                    
                    Service Discovery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="develop/loadBalancing.html">
            
                <a href="develop/loadBalancing.html">
            
                    
                    Load balancing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="develop/pipelines.html">
            
                <a href="develop/pipelines.html">
            
                    
                    Pipelines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="develop/logging.html">
            
                <a href="develop/logging.html">
            
                    
                    Logging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="develop/monitoring.html">
            
                <a href="develop/monitoring.html">
            
                    
                    Monitoring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="develop/tracing.html">
            
                <a href="develop/tracing.html">
            
                    
                    Tracing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="develop/circuitBreakers.html">
            
                <a href="develop/circuitBreakers.html">
            
                    
                    Circuit Breakers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="develop/configuration.html">
            
                <a href="develop/configuration.html">
            
                    
                    Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="fabric8DevOps.html">
            
                <a href="fabric8DevOps.html">
            
                    
                    Microservices Platform
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="console.html">
            
                <a href="console.html">
            
                    
                    Developer Console
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="cdelivery.html">
            
                <a href="cdelivery.html">
            
                    
                    CI and CD
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="jenkinsWorkflowLibrary.html">
            
                <a href="jenkinsWorkflowLibrary.html">
            
                    
                    Jenkins Workflow Library
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="fabric8YmlFile.html">
            
                <a href="fabric8YmlFile.html">
            
                    
                    fabric8.yml file
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="management.html">
            
                <a href="management.html">
            
                    
                    Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.1" data-path="logging.html">
            
                <a href="logging.html">
            
                    
                    Logging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.2" data-path="metrics.html">
            
                <a href="metrics.html">
            
                    
                    Metrics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="chat.html">
            
                <a href="chat.html">
            
                    
                    Chat
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="chaosMonkey.html">
            
                <a href="chaosMonkey.html">
            
                    
                    Chaos Monkey
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="ipaas.html">
            
                <a href="ipaas.html">
            
                    
                    Integration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="fabric8MQ.html">
            
                <a href="fabric8MQ.html">
            
                    
                    Messaging
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="apiManagement.html">
            
                <a href="apiManagement.html">
            
                    
                    API Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="apimanComponents.html">
            
                <a href="apimanComponents.html">
            
                    
                    Apiman Components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2" data-path="apimanGettingStarted.html">
            
                <a href="apimanGettingStarted.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.3" data-path="apimanDataModel.html">
            
                <a href="apimanDataModel.html">
            
                    
                    Data Model
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.2.4" data-path="apimanImportService.html">
            
                <a href="apimanImportService.html">
            
                    
                    Publish Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.5" data-path="apimanConsumeService.html">
            
                <a href="apimanConsumeService.html">
            
                    
                    Consume a Service
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="quickstarts/">
            
                <a href="quickstarts/">
            
                    
                    Quickstarts
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="quickstarts/archetypes.html">
            
                <a href="quickstarts/archetypes.html">
            
                    
                    Archetypes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="quickstarts/running.html">
            
                <a href="quickstarts/running.html">
            
                    
                    Running
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="quickstarts/walkthrough.html">
            
                <a href="quickstarts/walkthrough.html">
            
                    
                    Walk-through
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="tools.html">
            
                <a href="tools.html">
            
                    
                    Tools
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="testing.html">
            
                <a href="testing.html">
            
                    
                    Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="forge.html">
            
                <a href="forge.html">
            
                    
                    Forge
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" data-path="camelMavenPlugin.html">
            
                <a href="camelMavenPlugin.html">
            
                    
                    Camel Maven Plugin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="mavenPlugin.html">
            
                <a href="mavenPlugin.html">
            
                    
                    Maven Plugin
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.3.1" data-path="mavenDockerBuild.html">
            
                <a href="mavenDockerBuild.html">
            
                    
                    docker:build
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.2" data-path="mavenDockerPush.html">
            
                <a href="mavenDockerPush.html">
            
                    
                    docker:push
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.3" data-path="mavenFabric8Apply.html">
            
                <a href="mavenFabric8Apply.html">
            
                    
                    fabric8:apply
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.4" data-path="mavenFabric8CreateEnv.html">
            
                <a href="mavenFabric8CreateEnv.html">
            
                    
                    fabric8:create-env
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.5" data-path="mavenFabric8CreateRoutes.html">
            
                <a href="mavenFabric8CreateRoutes.html">
            
                    
                    fabric8:create-routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.6" data-path="mavenFabric8DeletePods.html">
            
                <a href="mavenFabric8DeletePods.html">
            
                    
                    fabric8:delete-pods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.7" data-path="mavenFabric8DevOps.html">
            
                <a href="mavenFabric8DevOps.html">
            
                    
                    fabric8:devops
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.8" data-path="mavenFabric8Helm.html">
            
                <a href="mavenFabric8Helm.html">
            
                    
                    fabric8:helm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.9" data-path="mavenFabric8HelmPush.html">
            
                <a href="mavenFabric8HelmPush.html">
            
                    
                    fabric8:helm-push
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.10" data-path="mavenFabric8Json.html">
            
                <a href="mavenFabric8Json.html">
            
                    
                    fabric8:json
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.3.10.1" data-path="annotationProcessors.html">
            
                <a href="annotationProcessors.html">
            
                    
                    annotation processors
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.3.11" data-path="mavenFabric8Recreate.html">
            
                <a href="mavenFabric8Recreate.html">
            
                    
                    fabric8:recreate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3.12" data-path="mavenFabric8Rolling.html">
            
                <a href="mavenFabric8Rolling.html">
            
                    
                    fabric8:rolling
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="helm.html">
            
                <a href="helm.html">
            
                    
                    Helm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="javaLibraries.html">
            
                <a href="javaLibraries.html">
            
                    
                    Java Libraries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="cdi.html">
            
                <a href="cdi.html">
            
                    
                    CDI
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="annotations.html">
            
                <a href="annotations.html">
            
                    
                    Annotations
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="secretAnnotations.html">
            
                <a href="secretAnnotations.html">
            
                    
                    Secret Annotations
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="architecture.html">
            
                <a href="architecture.html">
            
                    
                    Architecture
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="pods.html">
            
                <a href="pods.html">
            
                    
                    Pods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="replicationControllers.html">
            
                <a href="replicationControllers.html">
            
                    
                    Replication Controllers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="labels.html">
            
                <a href="labels.html">
            
                    
                    Labels
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="services.html">
            
                <a href="services.html">
            
                    
                    Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="apps.html">
            
                <a href="apps.html">
            
                    
                    Apps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="environments.html">
            
                <a href="environments.html">
            
                    
                    Environments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="builds.html">
            
                <a href="builds.html">
            
                    
                    Builds
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="projects.html">
            
                <a href="projects.html">
            
                    
                    Source Code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="v2-changes.html">
            
                <a href="v2-changes.html">
            
                    
                    Changes from V1
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="FAQ.html">
            
                <a href="FAQ.html">
            
                    
                    FAQ
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="faqGeneral.html">
            
                <a href="faqGeneral.html">
            
                    
                    General Questions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="faqFuse.html">
            
                <a href="faqFuse.html">
            
                    
                    JBoss Fuse Questions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="faqKubernetes.html">
            
                <a href="faqKubernetes.html">
            
                    
                    Kubernetes Questions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" >
            
                <a target="_blank" href="https://help.openshift.com/hc/en-us/categories/200177370-Frequently-Asked-Questions">
            
                    
                    OpenShift Questions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Publish Service</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="importing-a-service-from-fabric8-and-publishing-it-to-the-gateway"><a name="undefined" class="plugin-anchor" href="#undefined"><span class="fa fa-link"></span></a>Importing a service from Fabric8 and publishing it to the gateway</h2>
<p>Let&apos;s assume you have deployed the CxfCdi quickstart in Fabric8 using</p>
<pre><code>...
mvn -Pf8-deploy-local
...
</code></pre><p>from the <a href="https://github.com/fabric8io/ipaas-quickstarts/tree/release-v2.2.45/quickstart/cdi/cxf" _target="blank">ipaas-quickstarts/quickstart/cdi/cxf</a> directory and that you created your own organization in apiman. You can now navigate to the Organization/Service page to &apos;Import Services&apos; into apiman. Apiman will obtain a list of running services in your namespace that match your search string. Use &apos;*&apos; to match all service. </p>
<p><img src="images/apiman-serviceimport.png" alt="service import">.</p>
<p>Go through the wizzard and select import as &apos;Public Service&apos; as we don&apos;t yet have any Plans or Policies set up. Note that we can add those later if needed. Please notice that after the import is complete, the service has discovered the serviceUrl, serviceType, descriptionUrl and descriptionType. When the service was deployed to Kubernetes the service developer registered this information in Kubernetes using Kubernetes Service Annotations.</p>
<h3 id="kubernetes-service-annotations"><a name="undefined" class="plugin-anchor" href="#undefined"><span class="fa fa-link"></span></a>Kubernetes Service Annotations</h3>
<p>Kubernetes allows the creation of Service Annotations. Here we propose the use of the following annotations</p>
<ul>
<li><p>&apos;api.service.kubernetes.io/path&apos; - the path part of the service endpoint url. An example value could be &apos;cxfcdi&apos;,</p>
</li>
<li><p>&apos;api.service.kubernetes.io/protocol&apos; - the protocol of the service. Example values can be &apos;SOAP&apos; or &apos;REST&apos;,</p>
</li>
<li><p>&apos;api.service.kubernetes.io/scheme&apos; - the scheme of service endpoint url which can be &apos;http&apos; or &apos;https&apos; (defaults to &apos;http&apos;)</p>
</li>
<li><p>&apos;api.service.kubernetes.io/description-path&apos; - the path part of the service description document&#x2019;s endpoint. It is a pretty safe assumption that the service self documents. An example value for a swagger 2.0 document can be &apos;cxfcdi/swagger.json&apos;,</p>
</li>
<li><p>&apos;api.service.kubernetes.io/description-language&apos; - the type of Description Language used. Example values supported by apiman are &apos;WSDL&apos;, &apos;WADL&apos;, &apos;SwaggerJSON&apos;, &apos;SwaggerYAML&apos;.</p>
</li>
</ul>
<p>The fragment below is taken from the service section of the kubernetes.json were these annotations are used</p>
<pre><code>...
&quot;objects&quot; : [ {
  &quot;apiVersion&quot; : &quot;v1&quot;,
  &quot;kind&quot; : &quot;Service&quot;,
  &quot;metadata&quot; : {
    &quot;annotations&quot; : {
      &quot;api.service.kubernetes.io/path&quot; : &quot;cxfcdi&quot;,
      &quot;api.service.kubernetes.io/protocol&quot; : &quot;REST&quot;,
      &quot;api.service.kubernetes.io/description-path&quot; : &quot;cxfcdi/swagger.json&quot;,
      &quot;api.service.kubernetes.io/description-language&quot; : &quot;SwaggerJSON&quot;
      &quot;api.service.openshift.io/api-manager&quot; : &quot;apiman&quot;
  },
...
</code></pre><p>The <a href="http://fabric8.io/gitbook/mavenPlugin.html" _target="blank">fabric8-maven-plugin</a> makes it easy to define these annotations as properties in your project&apos;s pom. Simply add a property that is prefixed with &apos;fabric8.annotations.service.&apos;. In the <a href="https://github.com/fabric8io/ipaas-quickstarts/blob/v2.2.101/quickstart/cdi/cxf/pom.xml#L59-L62" _target="blank">CdiCxf project</a> mentioned above this looks like</p>
<pre><code>...
&lt;fabric8.annotations.service.api.service.kubernetes.io.path&gt;cxfcdi&lt;/fabric8.annotations.service.api.service.kubernetes.io.path&gt;
&lt;fabric8.annotations.service.api.service.kubernetes.io.protocol&gt;REST&lt;/fabric8.annotations.service.api.service.kubernetes.io.protocol&gt;
&lt;fabric8.annotations.service.api.service.kubernetes.io.description-path&gt;cxfcdi/swagger.json&lt;/fabric8.annotations.service.api.service.kubernetes.io.description-path&gt;
&lt;fabric8.annotations.service.api.service.kubernetes.io.description-language&gt;SwaggerJSON&lt;/fabric8.annotations.service.api.service.kubernetes.io.description-language&gt;
&lt;fabric8.annotations.service.api.service.openshift.io.api-manager&gt;apiman&lt;/fabric8.annotations.service.api.service.openshift.io.api-manager&gt;
...
</code></pre><p>By convention the part <em>after</em> the prefix is the annotation key, and if the key contains a &apos;.&apos;, everything before that last dot turns into the annotation&apos;s namespace. So, for example, &apos;api.service.kubernetes.io.path&apos; turns into &apos;api.service.kubernetes.io/path in the kubernetes.json.</p>
<h3 id="publishing-the-service-to-the-gateway"><a name="undefined" class="plugin-anchor" href="#undefined"><span class="fa fa-link"></span></a>Publishing the service to the gateway</h3>
<p>You may have noticed the use of the annotion &quot;api.service.openshift.io/api-manager&quot; : &quot;apiman&quot;. If this annotation is set it this service will be imported automatically. After the service is imported into the API manager, we can publish it out to the gateway. After publication the service will be ready for use by service consumers. To publish a service, open the service detail page and click the blue &apos;publish&apos; button.</p>
<p><img src="images/apiman-servicepublish.png" alt="service publish">.</p>
<p>The service data is send to the gateway and now the gateway is able to route traffic from the gateway to the internal service. The 
internal service address is displayed in the &apos;Implementation&apos; tab on the service detail page (<a href="http://quickstart-java-cxf-cdi.vagrant.f8/cxfcdi" _target="blank">http://quickstart-java-cxf-cdi.vagrant.f8/cxfcdi</a>), and the exact gateway address is displayed in the &apos;Endpoint&apos; tab (<a href="http://apiman-gateway.vagrant.f8/gateway/Fabric8Org/quickstart-java-cxf-cdi/1.0" _target="blank">http://apiman-gateway.vagrant.f8/gateway/Fabric8Org/quickstart-java-cxf-cdi/1.0</a>). The latter is the &apos;managed endpoint&apos; a service consumer would be using.</p>
<h3 id="applying-a-policy-to-a-public-service"><a name="undefined" class="plugin-anchor" href="#undefined"><span class="fa fa-link"></span></a>Applying a Policy to a &apos;Public Service&apos;</h3>
<p>A service can be published to the gateway without any policies but it makes sense to configure at least an authentication policy. Since we already published the service we can no longer change the settings on this version. So let&apos;s add version 1.1 of this service (clone version 1.0). Now you can navigate to the Policy screen on the Service and select Add Policy. In the dropdown select a Basic Authentication policy, and select &apos;Basic Auth Required&apos; and add a Static Identity and a  user/password pair.</p>
<p><img src="images/apiman-basicauth.png" alt="service definition link">.</p>
<p>Click save when done, and now you should see the policy on the &apos;Policy&apos; tab, so go ahead and &apos;Publish&apos; the service. The managed endpoint of this new version of the service is <a href="http://apiman-gateway.vagrant.f8/gateway/Fabric8Org/quickstart-java-cxf-cdi/1.1" _target="blank">http://apiman-gateway.vagrant.f8/gateway/Fabric8Org/quickstart-java-cxf-cdi/1.1</a>. You can try it in a new browser window and you should see it pop up the basic auth login box.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="apimanDataModel.html" class="navigation navigation-prev " aria-label="Previous page: Data Model">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="apimanConsumeService.html" class="navigation navigation-next " aria-label="Next page: Consume a Service">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Publish Service","level":"1.6.2.4","depth":3,"next":{"title":"Consume a Service","level":"1.6.2.5","depth":3,"path":"apimanConsumeService.md","ref":"apimanConsumeService.md","articles":[]},"previous":{"title":"Data Model","level":"1.6.2.3","depth":3,"path":"apimanDataModel.md","ref":"apimanDataModel.md","articles":[]},"dir":"ltr"},"config":{"plugins":["anchors"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"anchors":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"github":"fabric8io/fabric8","theme":"default","githubHost":"https://github.com/","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":36,"bottom":36},"toc":true},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Fabric8 Documentation","links":{"home":"http://fabric8.io/","about":"http://fabric8.io/docs/index.html","issues":"https://github.com/fabric8io/fabric8/issues?milestone=none&state=closed","contribute":"http://fabric8.io/contributing/index.html","sharing":{"google":null,"facebook":null,"twitter":"https://twitter.com/fabric8io"}},"gitbook":">=2.0.0","description":"Fabric8 User Guide and Reference Documentation","extension":"pdf"},"file":{"path":"apimanImportService.md","mtime":"2016-05-31T14:32:02.000Z","type":"markdown"},"gitbook":{"version":"3.0.3","time":"2016-05-31T14:35:23.122Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/buttons.js"></script>
        
    

    </body>
</html>

